[{"/Users/ali/Desktop/jamee-emamie/src/index.js":"1","/Users/ali/Desktop/jamee-emamie/src/config/index.js":"2","/Users/ali/Desktop/jamee-emamie/src/config/grants.js":"3","/Users/ali/Desktop/jamee-emamie/src/config/getDefaultRoutes.js":"4","/Users/ali/Desktop/jamee-emamie/src/pages/PageNotFound/index.js":"5","/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Lists.js":"6","/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Cols.js":"7","/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Storage.js":"8","/Users/ali/Desktop/jamee-emamie/src/config/locales/ru.js":"9","/Users/ali/Desktop/jamee-emamie/src/pages/About/index.js":"10","/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Companies/index.js":"11","/Users/ali/Desktop/jamee-emamie/src/containers/Reports/Providers.js":"12","/Users/ali/Desktop/jamee-emamie/src/components/Forms/Task.js":"13","/Users/ali/Desktop/jamee-emamie/src/pages/LandingPage/PageContent.js":"14","/Users/ali/Desktop/jamee-emamie/src/config/routes.js":"15","/Users/ali/Desktop/jamee-emamie/src/pages/LandingPage/index.js":"16","/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Paths.js":"17","/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Posts/Post.js":"18","/Users/ali/Desktop/jamee-emamie/src/config/locales/de.js":"19","/Users/ali/Desktop/jamee-emamie/src/pages/Dashboard/index.js":"20","/Users/ali/Desktop/jamee-emamie/src/containers/Reports/Days.js":"21","/Users/ali/Desktop/jamee-emamie/src/components/Forms/Company.js":"22","/Users/ali/Desktop/jamee-emamie/src/config/themes.js":"23","/Users/ali/Desktop/jamee-emamie/src/config/config.js":"24","/Users/ali/Desktop/jamee-emamie/src/App.js":"25","/Users/ali/Desktop/jamee-emamie/src/config/menuItems.js":"26","/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Docs.js":"27","/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Admin/index.js":"28","/Users/ali/Desktop/jamee-emamie/src/pages/LandingPage/Footer.js":"29","/Users/ali/Desktop/jamee-emamie/src/containers/Reports/Months.js":"30","/Users/ali/Desktop/jamee-emamie/src/components/Post/Post.js":"31","/Users/ali/Desktop/jamee-emamie/src/config/locales/en.js":"32","/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Companies/Company.js":"33","/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Tasks/index.js":"34","/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Messaging.js":"35"},{"size":1035,"mtime":1610912535094,"results":"36","hashOfConfig":"37"},{"size":39,"mtime":1610902777518,"results":"38","hashOfConfig":"37"},{"size":119,"mtime":1610902777518,"results":"39","hashOfConfig":"37"},{"size":2416,"mtime":1610902777518,"results":"40","hashOfConfig":"37"},{"size":1551,"mtime":1610902777535,"results":"41","hashOfConfig":"37"},{"size":5366,"mtime":1610902777530,"results":"42","hashOfConfig":"37"},{"size":5197,"mtime":1610902777529,"results":"43","hashOfConfig":"37"},{"size":4072,"mtime":1610902777531,"results":"44","hashOfConfig":"37"},{"size":709,"mtime":1610902777520,"results":"45","hashOfConfig":"37"},{"size":477,"mtime":1610902777523,"results":"46","hashOfConfig":"37"},{"size":1831,"mtime":1610902777526,"results":"47","hashOfConfig":"37"},{"size":1829,"mtime":1610902777522,"results":"48","hashOfConfig":"37"},{"size":2014,"mtime":1610902777516,"results":"49","hashOfConfig":"37"},{"size":7308,"mtime":1610902777532,"results":"50","hashOfConfig":"37"},{"size":2630,"mtime":1610902777521,"results":"51","hashOfConfig":"37"},{"size":7840,"mtime":1610902777532,"results":"52","hashOfConfig":"37"},{"size":3791,"mtime":1610902777530,"results":"53","hashOfConfig":"37"},{"size":5728,"mtime":1610902777527,"results":"54","hashOfConfig":"37"},{"size":596,"mtime":1610902777519,"results":"55","hashOfConfig":"37"},{"size":3285,"mtime":1610902777524,"results":"56","hashOfConfig":"37"},{"size":2056,"mtime":1610902777522,"results":"57","hashOfConfig":"37"},{"size":806,"mtime":1610902777516,"results":"58","hashOfConfig":"37"},{"size":863,"mtime":1610912723385,"results":"59","hashOfConfig":"37"},{"size":6169,"mtime":1610909368961,"results":"60","hashOfConfig":"37"},{"size":214,"mtime":1610912453784,"results":"61","hashOfConfig":"37"},{"size":10242,"mtime":1610913657840,"results":"62","hashOfConfig":"37"},{"size":3976,"mtime":1610902777530,"results":"63","hashOfConfig":"37"},{"size":1847,"mtime":1610902777524,"results":"64","hashOfConfig":"37"},{"size":1132,"mtime":1610902777531,"results":"65","hashOfConfig":"37"},{"size":2385,"mtime":1610902777522,"results":"66","hashOfConfig":"37"},{"size":5249,"mtime":1610902777517,"results":"67","hashOfConfig":"37"},{"size":569,"mtime":1610902777519,"results":"68","hashOfConfig":"37"},{"size":1605,"mtime":1610902777525,"results":"69","hashOfConfig":"37"},{"size":2129,"mtime":1610902777528,"results":"70","hashOfConfig":"37"},{"size":4373,"mtime":1610902777530,"results":"71","hashOfConfig":"37"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},"1l9d8d9",{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"105"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112","usedDeprecatedRules":"74"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"105"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/ali/Desktop/jamee-emamie/src/index.js",[],["147","148"],"/Users/ali/Desktop/jamee-emamie/src/config/index.js",[],"/Users/ali/Desktop/jamee-emamie/src/config/grants.js",[],["149","150"],"/Users/ali/Desktop/jamee-emamie/src/config/getDefaultRoutes.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/PageNotFound/index.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Lists.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Cols.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Storage.js",[],"/Users/ali/Desktop/jamee-emamie/src/config/locales/ru.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/About/index.js",[],["151","152"],"/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Companies/index.js",[],"/Users/ali/Desktop/jamee-emamie/src/containers/Reports/Providers.js",[],"/Users/ali/Desktop/jamee-emamie/src/components/Forms/Task.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/LandingPage/PageContent.js",[],"/Users/ali/Desktop/jamee-emamie/src/config/routes.js",[],["153","154"],"/Users/ali/Desktop/jamee-emamie/src/pages/LandingPage/index.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Paths.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Posts/Post.js",["155","156","157","158","159","160","161"],"import React, { useEffect, useState, useCallback } from 'react'\r\nimport Page from 'material-ui-shell/lib/containers/Page'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Publish from '@material-ui/icons/Publish'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Delete from '@material-ui/icons/Delete'\r\nimport { useIntl } from 'react-intl'\r\nimport moment from 'moment'\r\nimport { useAuth } from 'base-shell/lib/providers/Auth'\r\nimport { useFirebase } from 'rmw-shell/lib/providers/Firebase'\r\nimport SimpleEditor from 'rmw-shell/lib/containers/PostEditor'\r\nimport { useQuestions } from 'material-ui-shell/lib/providers/Dialogs/Question'\r\n\r\nconst Post = () => {\r\n  const history = useHistory()\r\n  const { uid } = useParams()\r\n  const intl = useIntl()\r\n  const { auth } = useAuth()\r\n  const [changed, setChanged] = useState(false)\r\n  const [initialized, setInitialized] = useState(false)\r\n  const { firebaseApp } = useFirebase()\r\n  const [isPublishing, setPublishing] = useState(false)\r\n  const [isPublished, setIsPublished] = useState(false)\r\n  const [post, setPost] = useState(false)\r\n  const { openDialog } = useQuestions()\r\n\r\n  const loadPost = useCallback(async () => {\r\n    const postSnap = await firebaseApp\r\n      .database()\r\n      .ref(`user_posts/${auth.uid}/${uid}`)\r\n      .once('value')\r\n\r\n    if (postSnap.exists()) {\r\n      const s = moment(postSnap.child('start').val())\r\n      const e = moment(postSnap.child('end').val())\r\n      setPost({ ...postSnap.child('post').val() })\r\n      setIsPublished(!!postSnap.child('publishedOn').val())\r\n      setInitialized(true)\r\n    }\r\n  }, [auth.uid, firebaseApp, uid])\r\n\r\n  useEffect(() => {\r\n    if (uid) {\r\n      loadPost()\r\n    }\r\n  }, [loadPost])\r\n\r\n  const handlePublish = async () => {\r\n    setPublishing(true)\r\n\r\n    const postSnap = await firebaseApp\r\n      .database()\r\n      .ref(`user_posts/${auth.uid}/${uid}`)\r\n      .once('value')\r\n\r\n    const publishedOn = moment(undefined).valueOf()\r\n    const order = 0 - publishedOn\r\n\r\n    if (postSnap.exists()) {\r\n      await firebaseApp\r\n        .database()\r\n        .ref(`posts/${uid}`)\r\n        .update({ ...postSnap.val(), publishedOn, order })\r\n      await firebaseApp\r\n        .database()\r\n        .ref(`user_posts/${auth.uid}/${uid}`)\r\n        .update({ publishedOn, order })\r\n    }\r\n\r\n    setPublishing(false)\r\n    history.goBack()\r\n  }\r\n\r\n  const handleImageUpload = (file) => {\r\n    return new Promise((resolve) => {\r\n      try {\r\n        let img = new Image()\r\n        img.src = window.URL.createObjectURL(file)\r\n        img.onload = async () => {\r\n          const index = file.name.lastIndexOf('.')\r\n          const fileExtension = file.name.slice(index)\r\n          const path = `user_posts/${\r\n            auth.uid\r\n          }/${uid}/${Date.now()}${fileExtension}`\r\n          let snapshot = await firebaseApp.storage().ref(path).put(file)\r\n\r\n          const downloadURL = await snapshot.ref.getDownloadURL()\r\n          const contentType = snapshot.metadata.contentType || null\r\n\r\n          resolve({\r\n            downloadURL,\r\n            contentType,\r\n            width: img.width,\r\n            height: img.height,\r\n            path,\r\n          })\r\n        }\r\n      } catch (error) {\r\n        resolve(error)\r\n      }\r\n    })\r\n  }\r\n\r\n  const onStateChanged = (state) => {\r\n    setChanged(true)\r\n  }\r\n\r\n  const onDefferedStateChange = async (post) => {\r\n    await firebaseApp.database().ref(`posts/${uid}`).update({\r\n      post,\r\n    })\r\n\r\n    setChanged(false)\r\n  }\r\n\r\n  const handleDelete = async (handleClose) => {\r\n    if (uid) {\r\n      await firebaseApp.database().ref().child(`posts/${uid}`).remove()\r\n\r\n      handleClose()\r\n      history.goBack()\r\n    }\r\n  }\r\n\r\n  const openDeleteDialog = () => {\r\n    openDialog({\r\n      handleAction: handleDelete,\r\n      title: intl.formatMessage({\r\n        id: `delete_post_dialog_title`,\r\n        defaultMessage: 'Delete Post?',\r\n      }),\r\n      message: intl.formatMessage({\r\n        id: `delete_post_dialog_message`,\r\n        defaultMessage: 'Post will be deleted permanently?',\r\n      }),\r\n      action: intl.formatMessage({\r\n        id: `delete_post_dialog_action`,\r\n        defaultMessage: 'DELETE POST',\r\n      }),\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Page\r\n      onBackClick={() => {\r\n        history.goBack()\r\n      }}\r\n      appBarContent={\r\n        <div>\r\n          <Tooltip title={intl.formatMessage({ id: 'publish' })}>\r\n            <IconButton\r\n              disabled={isPublishing}\r\n              onClick={handlePublish}\r\n              color=\"inherit\"\r\n            >\r\n              {isPublishing ? (\r\n                <CircularProgress\r\n                  color=\"secondary\"\r\n                  style={{ height: 20, width: 20 }}\r\n                />\r\n              ) : (\r\n                <Publish style={{ width: 25, height: 25 }} />\r\n              )}\r\n            </IconButton>\r\n          </Tooltip>\r\n          {uid && (\r\n            <Tooltip\r\n              title={intl.formatMessage({ id: 'delete' })}\r\n              onClick={() => {\r\n                openDeleteDialog()\r\n              }}\r\n            >\r\n              <IconButton disabled={isPublishing} color=\"inherit\">\r\n                <Delete />\r\n              </IconButton>\r\n            </Tooltip>\r\n          )}\r\n        </div>\r\n      }\r\n    >\r\n      <React.Fragment>\r\n        <SimpleEditor\r\n          handleImageUpload={handleImageUpload}\r\n          onStateChanged={onStateChanged}\r\n          //onDefferedStateChange={onDefferedStateChange}\r\n          initialState={post}\r\n        />\r\n      </React.Fragment>\r\n    </Page>\r\n  )\r\n}\r\n\r\nexport default Post\r\n","/Users/ali/Desktop/jamee-emamie/src/config/locales/de.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Dashboard/index.js",[],"/Users/ali/Desktop/jamee-emamie/src/containers/Reports/Days.js",[],"/Users/ali/Desktop/jamee-emamie/src/components/Forms/Company.js",[],"/Users/ali/Desktop/jamee-emamie/src/config/themes.js",[],"/Users/ali/Desktop/jamee-emamie/src/config/config.js",[],"/Users/ali/Desktop/jamee-emamie/src/App.js",[],"/Users/ali/Desktop/jamee-emamie/src/config/menuItems.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Docs.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Admin/index.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/LandingPage/Footer.js",[],"/Users/ali/Desktop/jamee-emamie/src/containers/Reports/Months.js",[],"/Users/ali/Desktop/jamee-emamie/src/components/Post/Post.js",[],"/Users/ali/Desktop/jamee-emamie/src/config/locales/en.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Companies/Company.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Demo/Tasks/index.js",[],"/Users/ali/Desktop/jamee-emamie/src/pages/Firebase/Messaging.js",[],{"ruleId":"162","replacedBy":"163"},{"ruleId":"164","replacedBy":"165"},{"ruleId":"162","replacedBy":"166"},{"ruleId":"164","replacedBy":"167"},{"ruleId":"162","replacedBy":"168"},{"ruleId":"164","replacedBy":"169"},{"ruleId":"162","replacedBy":"170"},{"ruleId":"164","replacedBy":"171"},{"ruleId":"172","severity":1,"message":"173","line":21,"column":10,"nodeType":"174","messageId":"175","endLine":21,"endColumn":17},{"ruleId":"172","severity":1,"message":"176","line":22,"column":10,"nodeType":"174","messageId":"175","endLine":22,"endColumn":21},{"ruleId":"172","severity":1,"message":"177","line":25,"column":10,"nodeType":"174","messageId":"175","endLine":25,"endColumn":21},{"ruleId":"172","severity":1,"message":"178","line":36,"column":13,"nodeType":"174","messageId":"175","endLine":36,"endColumn":14},{"ruleId":"172","severity":1,"message":"179","line":37,"column":13,"nodeType":"174","messageId":"175","endLine":37,"endColumn":14},{"ruleId":"180","severity":1,"message":"181","line":48,"column":6,"nodeType":"182","endLine":48,"endColumn":16,"suggestions":"183"},{"ruleId":"172","severity":1,"message":"184","line":110,"column":9,"nodeType":"174","messageId":"175","endLine":110,"endColumn":30},"no-native-reassign",["185"],"no-negated-in-lhs",["186"],["185"],["186"],["185"],["186"],["185"],["186"],"no-unused-vars","'changed' is assigned a value but never used.","Identifier","unusedVar","'initialized' is assigned a value but never used.","'isPublished' is assigned a value but never used.","'s' is assigned a value but never used.","'e' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'uid'. Either include it or remove the dependency array.","ArrayExpression",["187"],"'onDefferedStateChange' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"188","fix":"189"},"Update the dependencies array to be: [loadPost, uid]",{"range":"190","text":"191"},[1838,1848],"[loadPost, uid]"]